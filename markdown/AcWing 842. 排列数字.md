# [AcWing 842. æ’åˆ—æ•°å­—](https://www.acwing.com/problem/content/844/)

## é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªæ•´æ•° ğ‘›ï¼Œå°†æ•°å­— 1âˆ¼ğ‘› æ’æˆä¸€æ’ï¼Œå°†ä¼šæœ‰å¾ˆå¤šç§æ’åˆ—æ–¹æ³•ã€‚

ç°åœ¨ï¼Œè¯·ä½ æŒ‰ç…§å­—å…¸åºå°†æ‰€æœ‰çš„æ’åˆ—æ–¹æ³•è¾“å‡ºã€‚

**è¾“å…¥æ ¼å¼**

å…±ä¸€è¡Œï¼ŒåŒ…å«ä¸€ä¸ªæ•´æ•° ğ‘›ã€‚

**è¾“å‡ºæ ¼å¼**

æŒ‰å­—å…¸åºè¾“å‡ºæ‰€æœ‰æ’åˆ—æ–¹æ¡ˆï¼Œæ¯ä¸ªæ–¹æ¡ˆå ä¸€è¡Œã€‚

**æ•°æ®èŒƒå›´**

1â‰¤ğ‘›â‰¤7

**è¾“å…¥æ ·ä¾‹**ï¼š

```cpp
3
```

**è¾“å‡ºæ ·ä¾‹**ï¼š

```cpp
1 2 3
1 3 2
2 1 3
2 3 1
3 1 2
3 2 1
```

## C++

```cpp
#include <iostream>

using namespace std;

const int N = 10;
int n, path[N];
bool st[N]; // çŠ¶æ€æ•°ç»„

void dfs(int u) {
    if (u == n)// é€’å½’åˆ°æœ€åä¸€ä¸ªæ•°å­—
    {
        for (int i = 0; i < n; i++) printf("%d ", path[i]); // è¾“å‡ºä¿å­˜çš„ç»“æœ
        puts(" ");
    }

    for (int i = 1; i <= n; i++)
        if (!st[i]) // æ²¡æœ‰è¢«ç”¨è¿‡çš„æ•°
        {
            path[u] = i;
            st[i] = true; // iè¢«ç”¨è¿‡
            dfs(u + 1);// èµ°åˆ°ä¸‹ä¸€å±‚
            st[i] = false;// æ¢å¤ç°åœº
        }
}

int main() {
    scanf("%d", &n);
    dfs(0);
    return 0;
}
```

```cpp
#include <iostream>

using namespace std;

const int N = 10;

int n;
int path[N];

void dfs(int u, int state) {
    if (u == n) {
        for (int i = 0; i < n; i++) printf("%d ", path[i]);
        puts("");

        return;
    }

    for (int i = 0; i < n; i++)
        if (!(state >> i & 1)) {
            path[u] = i + 1;
            dfs(u + 1, state + (1 << i));
        }
}

int main() {
    scanf("%d", &n);

    dfs(0, 0);

    return 0;
}
```

`state`å˜é‡é€šè¿‡ä½è¿ç®—æ¥è·Ÿè¸ªå“ªäº›æ•°å­—å·²ç»è¢«ä½¿ç”¨è¿‡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯¦ç»†è¯´æ˜è¿™ä¸€è¿‡ç¨‹ï¼š

å‡è®¾æˆ‘ä»¬è¦æ‰¾å‡º 1 åˆ° 3 çš„æ‰€æœ‰æ’åˆ—ã€‚

**åˆå§‹åŒ–**

- `state`åˆå§‹åŒ–ä¸º 0ï¼ˆäºŒè¿›åˆ¶è¡¨ç¤ºä¸º`000`ï¼‰ï¼Œè¡¨ç¤ºæ²¡æœ‰ä»»ä½•æ•°å­—è¢«ä½¿ç”¨ã€‚

**ç¬¬ä¸€å±‚é€’å½’**

æˆ‘ä»¬ä»æ•°å­— 1 å¼€å§‹å°è¯•ï¼Œç›´åˆ°æ•°å­— 3ã€‚

- å°è¯•æ•°å­— 1:
  - æ£€æŸ¥æ•°å­— 1 æ˜¯å¦å·²ä½¿ç”¨ï¼š`state >> 0 & 1` ï¼ˆå³`000 >> 0 & 1`ï¼‰ç»“æœä¸º 0ï¼Œè¡¨ç¤ºæ•°å­— 1 æœªä½¿ç”¨ã€‚
  - æ›´æ–°`state`ï¼š`state + (1 << 0)`ï¼ˆå³`000 + 001`ï¼‰ï¼Œç°`state`å˜ä¸º`001`ï¼Œè¡¨ç¤ºæ•°å­— 1 å·²ä½¿ç”¨ã€‚
  - è¿›å…¥ä¸‹ä¸€å±‚é€’å½’ã€‚

**ç¬¬äºŒå±‚é€’å½’**

æ­¤æ—¶ï¼Œ`state`ä¸º`001`ï¼Œè¡¨ç¤ºæ•°å­— 1 å·²è¢«ä½¿ç”¨ã€‚

- å°è¯•æ•°å­— 1:
  - æ£€æŸ¥æ•°å­— 1 æ˜¯å¦å·²ä½¿ç”¨ï¼š`state >> 0 & 1` ï¼ˆå³`001 >> 0 & 1`ï¼‰ç»“æœä¸º 1ï¼Œè·³è¿‡ã€‚
- å°è¯•æ•°å­— 2:
  - æ£€æŸ¥æ•°å­— 2 æ˜¯å¦å·²ä½¿ç”¨ï¼š`state >> 1 & 1` ï¼ˆå³`001 >> 1 & 1`ï¼‰ç»“æœä¸º 0ï¼Œè¡¨ç¤ºæ•°å­— 2 æœªä½¿ç”¨ã€‚
  - æ›´æ–°`state`ï¼š`state + (1 << 1)`ï¼ˆå³`001 + 010`ï¼‰ï¼Œç°`state`å˜ä¸º`011`ï¼Œè¡¨ç¤ºæ•°å­— 1 å’Œ 2 å·²ä½¿ç”¨ã€‚
  - è¿›å…¥ä¸‹ä¸€å±‚é€’å½’ã€‚

**ç¬¬ä¸‰å±‚é€’å½’**

æ­¤æ—¶ï¼Œ`state`ä¸º`011`ã€‚

- å°è¯•æ•°å­— 1:
  - æ£€æŸ¥æ•°å­— 1 æ˜¯å¦å·²ä½¿ç”¨ï¼š`state >> 0 & 1` ï¼ˆå³`011 >> 0 & 1`ï¼‰ç»“æœä¸º 1ï¼Œè·³è¿‡ã€‚
- å°è¯•æ•°å­— 2:
  - æ£€æŸ¥æ•°å­— 2 æ˜¯å¦å·²ä½¿ç”¨ï¼š`state >> 1 & 1` ï¼ˆå³`011 >> 1 & 1`ï¼‰ç»“æœä¸º 1ï¼Œè·³è¿‡ã€‚
- å°è¯•æ•°å­— 3:
  - æ£€æŸ¥æ•°å­— 3 æ˜¯å¦å·²ä½¿ç”¨ï¼š`state >> 2 & 1` ï¼ˆå³`011 >> 2 & 1`ï¼‰ç»“æœä¸º 0ï¼Œè¡¨ç¤ºæ•°å­— 3 æœªä½¿ç”¨ã€‚
  - æ›´æ–°`state`ï¼š`state + (1 << 2)`ï¼ˆå³`011 + 100`ï¼‰ï¼Œç°`state`å˜ä¸º`111`ï¼Œè¡¨ç¤ºæ•°å­— 1ã€2 å’Œ 3 å·²ä½¿ç”¨ã€‚
  - æ‰¾åˆ°æ’åˆ—ï¼š1 2 3ã€‚

**å›æº¯**

å®Œæˆå½“å‰åˆ†æ”¯åï¼Œé€’å½’å‡½æ•°å°†ç»“æŸå½“å‰å±‚çš„æ‰§è¡Œå¹¶è¿”å›ä¸Šä¸€å±‚ï¼ŒåŒæ—¶`state`çš„å€¼ä¹Ÿä¼šæ¢å¤åˆ°è¿›å…¥å½“å‰å±‚ä¹‹å‰çš„çŠ¶æ€ï¼ˆé€šè¿‡å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸè‡ªç„¶å®ç°ï¼‰ï¼Œè¿™æ ·å°±å¯ä»¥ç»§ç»­å°è¯•å…¶ä»–çš„æ•°å­—ç»„åˆã€‚

## Go

```go
package main

import (
	"bufio"
	"fmt"
	"os"
)

const N = 10

var (
	n      int
	path   [N]int
	st     [N]bool
	writer = bufio.NewWriter(os.Stdout)
)

func dfs(u int) {
	if u == n {
		for i := 0; i < n; i++ {
			writer.WriteString(fmt.Sprintf("%d ", path[i]))
		}
		writer.WriteString("\n")
		return
	}

	for i := 1; i <= n; i++ {
		if !st[i] {
			path[u] = i
			st[i] = true
			dfs(u + 1)
			st[i] = false
		}
	}
}

func main() {
	defer writer.Flush()
	reader := bufio.NewReader(os.Stdin)
	fmt.Fscan(reader, &n)

	dfs(0)
}
```

```go
package main

import (
	"bufio"
	"fmt"
	"os"
)

const N = 10

var (
	n      int
	path   [N]int
	writer = bufio.NewWriter(os.Stdout)
)

func dfs(u int, state int) {
	if u == n {
		for i := 0; i < n; i++ {
			writer.WriteString(fmt.Sprintf("%d ", path[i]))
		}
		writer.WriteString("\n")
		return
	}

	for i := 0; i < n; i++ {
		if (state>>i)&1 == 0 {
			path[u] = i + 1
			dfs(u+1, state|(1<<i))
		}
	}
}

func main() {
	defer writer.Flush()
	reader := bufio.NewReader(os.Stdin)
	fmt.Fscan(reader, &n)

	dfs(0, 0)
}
```

